{% extends "base_home.html.twig" %}
{% block title %}Create tournament{% endblock %}
{% block css %}
    {{ parent() }}
    <link rel="stylesheet" href="/Ping-Pong/css/bootstrap-datetimepicker.min.css" />
{% endblock %}
{% block body %}
    {{ parent() }}
    <div class="container">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="panel-title text-center">Create tournament</div>
            </div>
            <div class="panel-body">
                <form action="/Ping-Pong/tournaments" id="form" method="post">
                    <div id="dname" class="form-group">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" id="name" name="name" placeholder="Name"/>
                    </div>
                    <div id="ddatetime" class="form-group">
                        <label for="datetime">Date and time</label>
                        <div class='input-group date' id='datetimepicker'>
                            <input type='text' class="form-control" id="datetime" name="datetime" placeholder="Date and time"/>
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar">
                                </span>
                            </span>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success">Create</button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascript %}
    {{ parent() }}
    <script type="text/javascript" src="/Ping-Pong/js/moment.min.js"></script>
    <script type="text/javascript" src="/Ping-Pong/vendor/twbs/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/Ping-Pong/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript">
        $(function() {

            $('#datetimepicker').datetimepicker({
                sideBySide: true,
                format: 'YYYY-MM-DD HH:mm',
                focusOnShow: true,
                allowInputToggle: true
            });

            $("#form").on("submit", function(event) {

                var name = $("#name").val();
                var dateTime = $('#datetimepicker').data().date;

                var error = false;
                if (!name) {
                    $("#dname").addClass("has-error");
                    error = true;
                } else {
                    $("#dname").removeClass("has-error");
                }

                if (!dateTime) {
                    $("#ddatetime").addClass("has-error");
                    error = true;
                } else {
                    $("#ddatetime").removeClass("has-error");
                }

                if (error) {
                    event.preventDefault();
                }
            });
        });
    </script>
{% endblock %}
